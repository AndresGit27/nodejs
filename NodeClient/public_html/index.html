<!DOCTYPE html>
<html>
    <head>
        <title>Login</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
    </head>
    <body>
        <table>
            <tr><td colspan="2">Identifícate</td></tr>
            <tr><td >Email</td><td ><input type="text" id="email" required value="" /></td></tr>
            <tr><td >Contraseña</td><td ><input type="text" id="password" required value="" /></td></tr>
            <tr><td colspan="2"><button id="enviar" >Enviar</button></td></tr>
        </table>
        <script type="text/javascript" src="js/jquery-3.3.1.min.js"></script>
        <script type="text/javascript" >
            $(document).ready(function(){
                
                $("#enviar").click(function(){
                   
                   var email = $("#email").val();
                   var password = $("#password").val();
                   
                   $.ajax({
                        url: "http://localhost:4000/api/login",
                        data: "email="+email+"&password=" + password,
                        type: "POST",
                        dataType: "json",
                        
                        success: function(data) {

                           localStorage.setItem("user_name", data.userInto.name);
                           localStorage.setItem("user_lastname", data.userInto.lastname);
                           localStorage.setItem("user_email", data.userInto.email);
                           localStorage.setItem("user_role", data.userInto.role);
                           localStorage.setItem("token", data.token);
                           window.location.href = 'welcome.html';
                        }
                     }); 
                });
        
            });
        </script>
    </body>
</html>
